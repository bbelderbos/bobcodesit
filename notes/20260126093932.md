# Decorator composition for access control in Django

Stack decorators to build layered access control. Each decorator handles one concern—authentication, org membership, feature flags—and they compose cleanly.

```python
from functools import wraps
from django.contrib.auth.decorators import login_required
from django.shortcuts import render

def premium_required(view_func):
    """Check user belongs to a premium organization."""
    @wraps(view_func)
    def _wrapped(request, *args, **kwargs):
        user_org = OrganizationUser.objects.filter(user=request.user).first()
        if user_org and user_org.org.is_premium:
            return view_func(request, *args, **kwargs)
        return render(request, "premium_required.html", status=403)
    return _wrapped

# Stack them: auth first, then premium check
@login_required
@premium_required
def dashboard(request):
    return render(request, "dashboard.html")
```

Order matters: `@login_required` runs first (outermost), so `@premium_required` can safely access `request.user`.

#django #decorators
