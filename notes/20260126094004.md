# Custom Django template filters for cleaner templates

Stop cluttering templates with logic. Write a simple filter, register it, and your templates stay readable.

```python
# templatetags/tags.py
from django import template
from django.utils.html import urlize
from django.utils.safestring import mark_safe

register = template.Library()

@register.filter
def urlize_newlines(text):
    """Convert URLs to links AND preserve line breaks."""
    if not text:
        return ""
    text = urlize(text)
    return mark_safe(text.replace("\n", "<br>"))

@register.filter
def num_undone_tasks(content):
    """Count incomplete tasks for a content piece."""
    return content.task_set.filter(done=False).count()

@register.filter
def make_ym(date):
    """Format date as YYYY-MM for calendar headers."""
    return date.strftime("%Y-%m")
```

```html
<!-- In template -->
{% load tags %}

{{ post.description|urlize_newlines }}
{{ content|num_undone_tasks }} tasks remaining
{{ month|make_ym }}
```

Filters are testable, reusable, and keep presentation logic out of views.

#django
